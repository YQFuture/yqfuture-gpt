syntax = "v1"

info(
    title: "店铺训练服务"
    desc: "店铺训练服务"
    author: "zouxiaodong"
    email: "13575232531@163.com"
    version: "v1"
)

import (
    "basicfunction.api"
)

// 店铺基础信息和分页相关
type (
    JudgeFirstShopReq {
        Uuid string `json:"uuid"` // 唯一标识
    }

    JudgeFirstShopResp {
        BaseResp
        Data int64 `json:"data"` // 是否初次 0: 是 1: 否
    }

    ShopPageListReq {
        BasePageReq
        PlatFormType int64 `json:"platFormType"`  // 平台类型
        TrainingStatus int64 `json:"trainStatus"` // 训练状态
        UpdateTime int64 `json:"updateTime"`      // 更新时间
    }

    ShopPageListResp {
        BaseResp
        Data *ShopListResp `json:"data"` // 数据
    }

    ShopListResp {
        BasePageResp
        List []*ShopResp `json:"list"` // 列表
    }

    ShopResp {
        Id string `json:"id"`                     // 店铺id
        Uuid string `json:"uuid"`                 // 唯一标识
        ShopName string `json:"shopName"`         // 店铺名称
        PlatFormType int64 `json:"platFormType"`  // 平台类型
        TrainingStatus int64 `json:"trainStatus"` // 训练状态
        TrainingTimes int64 `json:"trainTimes"`   // 训练次数
        UpdateTime int64 `json:"updateTime"`      // 更新时间
    }
)

// 商品基础信息和分页相关
type (
    GoodsPageListReq {
        BasePageReq
        ShopId string `json:"shopId"`        // 店铺id
        Enabled int64 `json:"enabled"`       // 启用状态  0: 未定义 1: 未启用 2: 启用
        UpdateTime int64 `json:"updateTime"` // 更新时间
    }

    GoodsPageListResp {
        BaseResp
        Data *GoodsListResp `json:"data"` // 数据
    }

    GoodsListResp {
        BasePageResp
        List []*GoodsResp `json:"list"` // 列表
    }

    GoodsResp {
        Id string `json:"id"`                           // 商品id
        ShopId string `json:"shopId"`                   // 店铺id
        GoodsName string `json:"goodsName"`             // 商品名称
        GoodsUrl string `json:"goodsUrl"`               // 商品url
        TrainingSummary string `json:"trainingSummary"` // 训练摘要
        Enabled int64 `json:"enabled"`                  // 启用状态 0: 未定义 1: 未启用 2: 启用
        TrainingStatus int64 `json:"trainStatus"`       // 训练状态 0: 初始 1: 预设中 2: 预设完成 11: 训练中 12: 训练完成
        TrainingTimes int64 `json:"trainingTimes"`      // 训练次数
        UpdateTime int64 `json:"updateTime"`            // 更新时间
    }

    BaseGoodsReq {
        GoodsId string `json:"goodsId"` // 商品id
    }

    AddGoodsReq {
        ShopId string `json:"shopId"` // 店铺id
        List []string `json:"list"`   // 商品url列表
    }
)

// 店铺训练/商品训练相关
type (
    // 店铺预训练参数
    ShopTrainingReq {
        Uuid string `json:"uuid"`                     // 唯一标识
        ShopName string `json:"shopName"`
        PlatFormType int64 `json:"platFormType"`      // 平台类型
        Authorization string `header:"Authorization"` // JWT
        Cookies string `json:"cookies"`
    }

        // 店铺预训练返回
    ShopTrainingResp {
        BaseResp
        Data interface{} `json:"data"` // 数据
    }

        // 取消店铺预训练参数
    CancelPreSettingReq {
        Uuid string `json:"uuid"` // 唯一标识
    }

    TrainingShopReq {
        Uuid string `json:"uuid"` // 唯一标识
    }
    TrainingShopResp {
        BaseResp
        Data int64 `json:"data"`
    }
    GetShopTrainingProgressReq {
        Uuid string `json:"uuid"` // 唯一标识
    }
    GetShopTrainingProgressResp {
        BaseResp
        Data *ShopTrainingProgress `json:"data"` // 训练进度
    }

    ShopTrainingProgress {
        TrainingStatus int64 `json:"trainStatus"`       // 训练状态 0: 初始 1: 预设中 2: 预设完成 11: 训练中 12: 训练完成
        GoodsNum int64 `json:"goodsNum"`                // 商品数量
        Token int64 `json:"token"`                      // 训练token
        FileSize int64 `json:"fileSize"`                // 文件大小
        Power int64 `json:"power"`                      // 训练算力
        Time int64 `json:"time"`                        // 训练耗时
    }

    PreSettingGoodsReq {
        GoodsId string `json:"goodsId"`               // 商品id
        Authorization string `header:"Authorization"` // JWT
        Cookies string `json:"cookies"`
    }

    CancelPreSettingGoodsReq {
        GoodsId string `json:"goodsId"` // 商品id
    }

    TrainingGoodsReq {
        GoodsId string `json:"goodsId"` // 商品id
    }
    TrainingGoodsResp {
        BaseResp
        Data int64 `json:"data"` // 训练状态 0: 初始 1: 预设中 2: 预设完成 11: 训练中 12: 训练完成
    }

    GetGoodsTrainingResultReq {
        GoodsId string `json:"goodsId"` // 商品id
    }
    GetGoodsTrainingResultResp {
        BaseResp
        Data interface{} `json:"data"` // 训练结果
    }

    GetGoodsTrainingProgressReq {
        GoodsId string `json:"goodsId"` // 商品id
    }
    GetGoodsTrainingProgressResp {
        BaseResp
        Data *GoodsTrainingProgress `json:"data"` // 训练进度
    }

    GoodsTrainingProgress {
        TrainingStatus int64 `json:"trainStatus"`       // 训练状态 0: 初始 1: 预设中 2: 预设完成 11: 训练中 12: 训练完成
        GoodsNum int64 `json:"goodsNum"`                // 商品数量
        Token int64 `json:"token"`                      // 训练token
        FileSize int64 `json:"fileSize"`                // 文件大小
        Power int64 `json:"power"`                      // 训练算力
        Time int64 `json:"time"`                        // 训练耗时
    }
)

// 三方接口
type (
    SaveShopReq {
        SerialNumber string `json:"serial_number"`
        Uuid string `json:"uuid"`
        ShopName string `json:"shop_name"`
        PlatForm string `json:"platform"`
        GoodsList []SaveGoods `json:"goods_list"`
    }
    SaveGoods {
        GoodsName string `json:"name"`
        GoodsUrl string `json:"url"`
        PlatFormId string `json:"id"`
    }
    SaveShopResp {
        BaseResp
    }
)