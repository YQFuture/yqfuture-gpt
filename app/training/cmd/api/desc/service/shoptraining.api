syntax = "v1"

info(
    title: "店铺训练服务"
    desc: "店铺训练服务"
    author: "zouxiaodong"
    email: "13575232531@163.com"
    version: "v1"
)

import (
    "basefunction.api"
)

// 店铺
type (
    // 判断店铺是否首次登录请求体 即从未进行过训练
    JudgeShopFirstReq {
        Uuid string `json:"uuid"` // 店铺uuid
    }

        // 判断店铺是否首次登录返回体
    JudgeShopFirstResp {
        BaseResp
        Data int64 `json:"data"` // 是否首次 0: 是 1: 否
    }

        // 分页查询店铺列表请求体
    ShopPageListReq {
        BasePageReq
        PlatFormType int64 `json:"platFormType"`  // 平台类型
        TrainingStatus int64 `json:"trainStatus"` // 训练状态  0: 初始 1: 预设中 2: 预设完成 11: 训练中 12: 训练完成
        UpdateTime int64 `json:"updateTime"`      // 更新时间
    }

        // 分页查询店铺列表请求返回
    ShopPageListResp {
        BaseResp
        Data *ShopListResp `json:"data"` // 数据
    }

        // 店铺分页列表返回体
    ShopListResp {
        BasePageResp
        List []*ShopResp `json:"list"` // 列表
    }

        // 单条店铺数据返回体
    ShopResp {
        Id string `json:"id"`                     // 店铺id
        Uuid string `json:"uuid"`                 // 唯一标识
        ShopName string `json:"shopName"`         // 店铺名称
        PlatFormType int64 `json:"platFormType"`  // 平台类型
        TrainingStatus int64 `json:"trainStatus"` // 训练状态
        TrainingTimes int64 `json:"trainTimes"`   // 训练次数
        UpdateTime int64 `json:"updateTime"`      // 更新时间
    }

        // 预设店铺请求体
    PresettingShopReq {
        Uuid string `json:"uuid"`                     // 店铺uuid
        ShopName string `json:"shopName"`             // 店铺名称
        PlatFormType int64 `json:"platFormType"`      // 平台类型
        Authorization string `header:"Authorization"` // JWT
        Cookies string `json:"cookies"`               // 店铺用户cookie
    }

        // 预设店铺返回体
    PresettingShopResp {
        BaseResp
    }

        // 取消店铺预设请求体
    CancelPreSettingShopReq {
        Uuid string `json:"uuid"` // 店铺uuid
    }

        // 取消店铺预设参数返回体
    CancelPreSettingShopResp {
        BaseResp
    }

        // 训练店铺请求体
    TrainingShopReq {
        Uuid string `json:"uuid"` // 唯一标识
    }

        // 训练店铺返回体
    TrainingShopResp {
        BaseResp
        Data int64 `json:"data"`
    }

        // 获取店铺训练进度请求体
    GetShopTrainingProgressReq {
        Uuid string `json:"uuid"` // 唯一标识
    }

        // 获取店铺训练进度返回体
    GetShopTrainingProgressResp {
        BaseResp
        Data *ShopTrainingProgress `json:"data"` // 训练进度
    }

        // 店铺训练进度内容
    ShopTrainingProgress {
        TrainingStatus int64 `json:"trainStatus"`       // 训练状态 0: 初始 1: 预设中 2: 预设完成 11: 训练中 12: 训练完成
        GoodsNum int64 `json:"goodsNum"`                // 商品数量
        Token int64 `json:"token"`                      // 训练token
        FileSize int64 `json:"fileSize"`                // 文件大小
        Power int64 `json:"power"`                      // 训练算力
        Time int64 `json:"time"`                        // 训练耗时
    }
)

// 商品基础信息和分页相关实体
type (
    // 分页查询商品列表请求体
    GoodsPageListReq {
        BasePageReq
        ShopId string `json:"shopId"`        // 店铺id
        Enabled int64 `json:"enabled"`       // 启用状态  0: 未定义 1: 未启用 2: 启用
        UpdateTime int64 `json:"updateTime"` // 更新时间
    }

        // 分页查询商品列表请求返回
    GoodsPageListResp {
        BaseResp
        Data *GoodsListResp `json:"data"` // 数据
    }

        // 商品分类列表返回体
    GoodsListResp {
        BasePageResp
        List []*GoodsResp `json:"list"` // 列表
    }

        // 单条商品数据返回体
    GoodsResp {
        Id string `json:"id"`                           // 商品id
        ShopId string `json:"shopId"`                   // 店铺id
        GoodsName string `json:"goodsName"`             // 商品名称
        GoodsUrl string `json:"goodsUrl"`               // 商品url
        TrainingSummary string `json:"trainingSummary"` // 训练摘要
        Enabled int64 `json:"enabled"`                  // 启用状态 0: 未定义 1: 未启用 2: 启用
        TrainingStatus int64 `json:"trainStatus"`       // 训练状态 0: 初始 1: 预设中 2: 预设完成 11: 训练中 12: 训练完成
        TrainingTimes int64 `json:"trainingTimes"`      // 训练次数
        UpdateTime int64 `json:"updateTime"`            // 更新时间
    }

        // 刷新商品列表请求体
    RefreshGoodsReq {
        ShopId string `json:"shopId"` // 店铺id
    }

        // 启用/停用商品请求体
    EnableGoodsReq {
        GoodsId string `json:"goodsId"` // 商品id
    }

        // 预设商品请求体
    PreSettingGoodsReq {
        GoodsId string `json:"goodsId"`               // 商品id
        Authorization string `header:"Authorization"` // JWT
        Cookies string `json:"cookies"`
    }

        // 取消商品预设请求体
    CancelPreSettingGoodsReq {
        GoodsId string `json:"goodsId"` // 商品id
    }

        // 训练商品请求体
    TrainingGoodsReq {
        GoodsId string `json:"goodsId"` // 商品id
    }

        // 训练商品返回体
    TrainingGoodsResp {
        BaseResp
        Data int64 `json:"data"` // 训练状态 0: 初始 1: 预设中 2: 预设完成 11: 训练中 12: 训练完成
    }

        // 获取商品训练进度请求体
    GetGoodsTrainingProgressReq {
        GoodsId string `json:"goodsId"` // 商品id
    }

        // 获取商品训练进度返回体
    GetGoodsTrainingProgressResp {
        BaseResp
        Data *GoodsTrainingProgress `json:"data"` // 训练进度
    }

        // 商品训练进度内容
    GoodsTrainingProgress {
        TrainingStatus int64 `json:"trainStatus"`       // 训练状态 0: 初始 1: 预设中 2: 预设完成 11: 训练中 12: 训练完成
        GoodsNum int64 `json:"goodsNum"`                // 商品数量
        Token int64 `json:"token"`                      // 训练token
        FileSize int64 `json:"fileSize"`                // 文件大小
        Power int64 `json:"power"`                      // 训练算力
        Time int64 `json:"time"`                        // 训练耗时
    }

        // 获取商品训练结果请求体
    GetGoodsTrainingResultReq {
        GoodsId string `json:"goodsId"` // 商品id
    }

        // 获取商品训练结果返回体
    GetGoodsTrainingResultResp {
        BaseResp
        Data interface{} `json:"data"` // 训练结果
    }
)

// 三方
type (
    // 保存店铺请求体
    SaveShopReq {
        SerialNumber string `json:"serial_number"`
        Uuid string `json:"uuid"`
        ShopName string `json:"shop_name"`
        PlatForm string `json:"platform"`
        GoodsList []SaveGoods `json:"goods_list"`
    }

        // 保存店铺商品内容
    SaveGoods {
        GoodsName string `json:"name"`
        GoodsUrl string `json:"url"`
        PlatFormId string `json:"id"`
    }

        // 保存店铺返回体
    SaveShopResp {
        BaseResp
    }
)